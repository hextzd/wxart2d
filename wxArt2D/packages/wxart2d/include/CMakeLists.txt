#FILE( WRITE "${wxart2d_BINARY_DIR}/include/wxart2d.h" "// all headers of wxArt2D" )
                
# when compiling a module as dll, other modules include files are in WXUSINGDLL mode included
# the module itself it include files or included in MAKINGDLL mode
# thise setting decide it something is exported or not in that module.
IF( WXART2D_MAKE_SHARED )
    SET(ART2D_ARTBASE_IF "#if defined(A2DARTBASEMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_ARTBASE_END "#endif //defined(A2DARTBASEMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_AGGDRAWER_IF "#if defined(A2DAGGDRAWERMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_AGGDRAWER_END "#endif //defined(A2DAGGDRAWERMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_GDIPLUSDRAWER_IF "#if defined(A2DGDIPLUSDRAWERMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_GDIPLUSDRAWER_END "#endif //defined(A2DGDIPLUSDRAWERMAKINGDLL) || defined(WXUSINGDLL)")
	
    SET(ART2D_CANVAS_IF "#if defined(A2DCANVASMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_CANVAS_END "#endif //defined(A2DCANVASMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_EDITOR_IF "#if defined(A2DEDITORMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_EDITOR_END "#endif //defined(A2DEDITORMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_CURVES_IF "#if defined(A2DCURVESMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_CURVES_END "#endif //defined(A2DCURVESMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_DOCVIEW_IF "#if defined(A2DDOCVIEWMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_DOCVIEW_END "#endif //defined(A2DDOCVIEWMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_SVGIO_IF "#if defined(A2DSVGIOMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_SVGIO_END "#endif //defined(A2DSVGIOMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_KBOOL_IF "#if defined(A2DKBOOLMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_KBOOL_END "#endif //defined(A2DKBOOLMAKINGDLL) || defined(WXUSINGDLL)")

    SET(ART2D_GDSIO_IF "#if defined(A2DGDSIOMAKINGDLL) || defined(WXUSINGDLL)")
    SET(ART2D_GDSIO_END "#endif //defined(A2DGDSIOMAKINGDLL) || defined(WXUSINGDLL)")
ENDIF( WXART2D_MAKE_SHARED )

CONFIGURE_FILE( ${wxart2d_SOURCE_DIR}/include/wxart2d.h.in ${wxart2d_BINARY_DIR}/include/wxart2d.h @ONLY IMMEDIATE)
CONFIGURE_FILE( ${wxart2d_SOURCE_DIR}/include/a2dprivate.h ${wxart2d_BINARY_DIR}/include/a2dprivate.h @ONLY IMMEDIATE)
CONFIGURE_FILE( ${wxart2d_SOURCE_DIR}/include/a2dprec.h ${wxart2d_BINARY_DIR}/include/a2dprec.h @ONLY IMMEDIATE)

SET(ART2D_OPTION "// all module's options of wxArt2D\n")

IF(WXART2D_USE_AGGDRAWER)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_AGGDRAWER 1\n"  )
ELSE(WXART2D_USE_AGGDRAWER)
    SET(ART2D_OPTION  "${ART2D_OPTION} #define wxART2D_USE_AGGDRAWER 0\n"  )
ENDIF(WXART2D_USE_AGGDRAWER)

IF(WXART2D_USE_GDIPLUSDRAWER)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_GDIPLUSDRAWER 1\n"  )
ELSE(WXART2D_USE_GDIPLUSDRAWER)
    SET(ART2D_OPTION  "${ART2D_OPTION} #define wxART2D_USE_GDIPLUSDRAWER 0\n"  )
ENDIF(WXART2D_USE_GDIPLUSDRAWER)

IF(WXART2D_USE_ARTBASE)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_ARTBASE 1\n"  )
ELSE(WXART2D_USE_ARTBASE)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_ARTBASE 0\n"  )
ENDIF(WXART2D_USE_ARTBASE)

IF(WXART2D_USE_CANEXTOBJ)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_CANEXTOBJ 1\n"  )
ELSE(WXART2D_USE_CANEXTOBJ)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_CANEXTOBJ 0\n"  )
ENDIF(WXART2D_USE_CANEXTOBJ)

IF(WXART2D_USE_CANVAS)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_CANVAS 1\n"  )
ELSE(WXART2D_USE_CANVAS)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_CANVAS 0\n"  )
ENDIF(WXART2D_USE_CANVAS)

IF(WXART2D_USE_CURVES)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_CURVES 1\n"  )
ELSE(WXART2D_USE_CURVES)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_CURVES 0\n"  )
ENDIF(WXART2D_USE_CURVES)

IF(WXART2D_USE_EDITOR)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_EDITOR 1\n"  )
ELSE(WXART2D_USE_EDITOR)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_EDITOR 0\n"  )
ENDIF(WXART2D_USE_EDITOR)

IF(WXART2D_USE_GDSIO)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_GDSIO 1\n"  )
ELSE(WXART2D_USE_GDSIO)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_GDSIO 0\n"  )
ENDIF(WXART2D_USE_GDSIO)

IF(WXART2D_USE_KBOOL)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_KBOOL 1\n"  )
ELSE(WXART2D_USE_KBOOL)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_KBOOL 0\n"  )
ENDIF(WXART2D_USE_KBOOL)

IF(WXART2D_USE_KEYIO)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_KEYIO 1\n"  )
ELSE(WXART2D_USE_KEYIO)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_KEYIO 0\n"  )
ENDIF(WXART2D_USE_KEYIO)

IF(WXART2D_USE_LUAWRAPS)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_LUAWRAPS 1\n"  )
ELSE(WXART2D_USE_LUAWRAPS)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_LUAWRAPS 0\n"  )
ENDIF(WXART2D_USE_LUAWRAPS)

IF(WXART2D_USE_SVGIO)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_SVGIO 1\n"  )
ELSE(WXART2D_USE_SVGIO)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_SVGIO 0\n"  )
ENDIF(WXART2D_USE_SVGIO)

IF(WXART2D_USE_XMLPARSE)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_XMLPARSE 1\n"  )
ELSE(WXART2D_USE_XMLPARSE)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_XMLPARSE 0\n"  )
ENDIF(WXART2D_USE_XMLPARSE)

IF(WXART2D_USE_FREETYPE)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_FREETYPE 1\n"  )
ELSE(WXART2D_USE_FREETYPE)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_FREETYPE 0\n"  )
ENDIF(WXART2D_USE_FREETYPE)

IF(WXART2D_USE_LUA)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_LUA 1\n"  )
ELSE(WXART2D_USE_LUA)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_LUA 0\n"  )
ENDIF(WXART2D_USE_LUA)

IF(WXART2D_USE_AGG)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_AGG 1\n"  )
ELSE(WXART2D_USE_AGG)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_AGG 0\n"  )
ENDIF(WXART2D_USE_AGG)

IF(WXART2D_USE_EDITOR)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_EDITOR 1\n"  )
ELSE(WXART2D_USE_EDITOR)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_EDITOR 0\n"  )
ENDIF(WXART2D_USE_EDITOR)

IF(WXART2D_USE_OPENGL)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_OPENGL 1\n"  )
ELSE(WXART2D_USE_OPENGL)
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_OPENGL 0\n"  )
ENDIF(WXART2D_USE_OPENGL)

IF( WXART2D_USE_GRAPHICS_CONTEXT )
    SET(ART2D_OPTION "${ART2D_OPTION} #if  wxUSE_GRAPHICS_CONTEXT \n"  )
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_GRAPHICS_CONTEXT 1\n"  )
    SET(ART2D_OPTION "${ART2D_OPTION} #else \n"  )
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_GRAPHICS_CONTEXT 0\n"  )
    SET(ART2D_OPTION "${ART2D_OPTION} #endif  \n"  )
ELSE( WXART2D_USE_GRAPHICS_CONTEXT )
    SET(ART2D_OPTION "${ART2D_OPTION} #define wxART2D_USE_GRAPHICS_CONTEXT 0\n"  )
ENDIF( WXART2D_USE_GRAPHICS_CONTEXT )

# really need to do this in setup.h  of wxWidgets.
#IF( wxWidgets_USE_OPENGL )
#    SET(ART2D_OPTION "${ART2D_OPTION} #define wxUSE_GLCANVAS 1\n"  )
#ELSE( wxWidgets_USE_OPENGL )
#    SET(ART2D_OPTION "${ART2D_OPTION} #define wxUSE_GLCANVAS 0\n"  )
#ENDIF( wxWidgets_USE_OPENGL )

CONFIGURE_FILE( ${wxart2d_SOURCE_DIR}/include/art2dsetup.h.in ${wxart2d_BINARY_DIR}/include/art2dsetup.h @ONLY IMMEDIATE)

INSTALL( 
    FILES ${wxart2d_SOURCE_DIR}/include/a2dprec.h
    DESTINATION lib/wxart2d/include/${wxWidgets_SELECTED_CONFIG} 
)

INSTALL( 
    FILES ${wxart2d_BINARY_DIR}/include/art2dsetup.h
    DESTINATION lib/wxart2d/include/${wxWidgets_SELECTED_CONFIG} 
)

INSTALL( 
    FILES ${wxart2d_BINARY_DIR}/include/wxart2d.h
    DESTINATION include/wxart2d-${WXART2D_MAJOR_VERSION}.${WXART2D_MINOR_VERSION}
)

INSTALL( 
    FILES ${wxart2d_SOURCE_DIR}/include/a2dprivate.h
    DESTINATION include/wxart2d-${WXART2D_MAJOR_VERSION}.${WXART2D_MINOR_VERSION}
)

IF( NOT WIN32 )

    #SET( wxart2d_FLAGS ${wxart2d_FLAGS} -include a2dprec.cpp -Winvalid-pch )    
    SET( compile_FLAGS ${wxart2d_FLAGS} ${wxart2d_INCLUDE_DIRS} ${wxart2d_LIBRARY_DIRS} ${wxart2d_LIBRARIES} )
    SEPARATE_ARGUMENTS( compile_FLAGS )
    
    ADD_CUSTOM_COMMAND(
        OUTPUT  ${wxart2d_SOURCE_DIR}/modules/wx/general/a2dprec.cpp
        COMMAND ${CMAKE_CXX_COMPILER}
                ${compile_FLAGS}
                -x c++-header
                -o ${wxart2d_SOURCE_DIR}/modules/wx/general/a2dprec.cpp
                wxart2d.h
        DEPENDS wxart2d.h
    )
    
    ADD_CUSTOM_TARGET( wxart2d_gch 
        DEPENDS ${wxart2d_SOURCE_DIR}/modules/wx/general/a2dprec.cpp
    )
ENDIF( NOT WIN32 )


 
